# IoT1.19

마리아디비 책 

p.120

* 열쇠가 두개인 값 
  * pk인 동시에 fk 인 값



p.197

* group by : 어떠한 컬럼을 기준으로 그룹핑

  * group by 의 기준은 바꿀 수 없음
  * 기준컬럼 외의 컬럼의 값들은 찌부됨
    * AVG(), SUM() 등의 집계 함수와 사용해 주어야 함

  * group by 해서 그루핑한 값들은 where 대신 having 을 사용해서 조건을 준다
    * 집계함수에 대해서 조건을 제한하는 것
  * 두 개의 컬럼을 그루핑할 수 있음



p.224

* varchar 와 char의 차이점 : varchar 는 크기가 가변적, 입력하는 데이터의 크기에 따라 조절됨
* varchar 와 nvarchar 의 차이점 : 



p230

* 데이터 형식 변환 함수
  * CAST()
  * CONVERT()



p234

* 제어 흐름 함수
* price가 null인 값은 배제되고 count된다 -> 결측치
  * SELECT count(price) FROM items;
* price가 null 인 경우 1로 친다
  * SELECT AVG(IFNULL(price,1)) FROM items;
* 년월일 포맷 기억해두기



p236

* FORMAT()는 스트링으로 변환된다





# 오늘 핵심 내용

### 단일 행을 조회한다

### 그룹 행을 조회한다

### 그룹함수, 일반함수

### case ~ when ~ then

### 날짜 관련 함수

### RANK

### 피벗 - 데이터를 분석해서 뿌릴 때 유용

### JSON(DICT)









p260

### JSON

* 데이터를 하나의 문장으로 주고받는 형태
* 파이썬의 딕셔너리와 형태가 동일 
  * 파이썬에서 eval()을 활용해 변형할 수 있다







# ws0118 활용해서 복습하기

 #### 장바구니 조회( 단일 행 조회)

#### 상품중에 가격이 5000원 이상인 상품 조회 (일반함수 where 사용)

#### 리뷰에서 유저별 평점 5점이상 조회(group by having 사용)

#### 주문중에서 총합계가격에 따른 low,middle,high 등급 나누기 (case ~ when ~then)

#### 장바구니 소멸기한(30일) 각 장바구니 로우별 남은 소멸기한 구하기(날짜 관련함수 사용)

#### 유저별 구매순위(rank)

#### 유저별 총주문가격합계  조회 (피벗사용)

#### 제이슨은 각자사용